#pragma once

#include "struct.h"
#include <graphics.h>

enum Block {
	NOR_CAMP, DIS_CAMP, WALL, STONE
};

class Map {
public:
	Map();
	void loadMap();                                  //从文件中导入地图
	void showMap();                                  //显示地图
	void adjust(int i, int j);                       //调整地图
	void adjust(int i, int j, int val);              //调整砖块
	void update();
	void setNeedUpdate(bool b);

	char map[26][27] = {
		"00000000000000000000000000",
		"00000000000000000000000000",
		"00330033003300330033003300",
		"00330033003300330033003300",
		"00330033003300330033003300",
		"00330033003300330033003300",
		"00330033003355330033003300",
		"00330033003355330033003300",
		"00330033003300330033003300",
		"00330033000000000033003300",
		"00330033000000000033003300",
		"00000000003300330000000000",
		"00000000003300330000000000",
		"33003333000000000033330033",
		"55003333000000000033330055",
		"00000000003300330000000000",
		"00000000003333330000000000",
		"00330033003333330033003300",
		"00330033003300330033003300",
		"00330033003300330033003300",
		"00330033003300330033003300",
		"00330033000000000033003300",
		"00330033000000000033003300",
		"00330033000333300033003300",
		"00000000000319300000000000",
		"00000000000399300000000000"
	};
	char cover[26][27][4]{};                         //覆盖标记
private:
	IMAGE block_img[4];                              //方块图片
	IMAGE black;                                     //用于覆盖1/4块砖
	bool need_update;

	void coverWall(int i, int j);
};

